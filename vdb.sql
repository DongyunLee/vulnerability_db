/*
 Navicat Premium Data Transfer

 Source Server         : 阿里云数据库
 Source Server Type    : MySQL
 Source Server Version : 50725
 Source Host           : rm-2zedvlu8389rhw5e02o.mysql.rds.aliyuncs.com:3306
 Source Schema         : vdb

 Target Server Type    : MySQL
 Target Server Version : 50725
 File Encoding         : 65001

 Date: 14/08/2019 09:45:50
*/

SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;

-- ----------------------------
-- Table structure for bugtraq
-- ----------------------------
DROP TABLE IF EXISTS `bugtraq`;
CREATE TABLE `bugtraq`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `bid_number` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT 'bid',
  `bid_url` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL,
  `create_time` int(10) UNSIGNED NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = 'bid编号表' ROW_FORMAT = Dynamic;

-- ----------------------------
-- Table structure for cves
-- ----------------------------
DROP TABLE IF EXISTS `cves`;
CREATE TABLE `cves`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `cve_number` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'cve编号',
  `cve_url` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL,
  `create_time` int(10) UNSIGNED NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = 'CVE编号表' ROW_FORMAT = Dynamic;

-- ----------------------------
-- Table structure for files
-- ----------------------------
DROP TABLE IF EXISTS `files`;
CREATE TABLE `files`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `title` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '文件名',
  `create_time` int(10) UNSIGNED NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `title`(`title`(191)) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '文件上传表' ROW_FORMAT = Dynamic;

-- ----------------------------
-- Table structure for log
-- ----------------------------
DROP TABLE IF EXISTS `log`;
CREATE TABLE `log`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `file_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '文件名',
  `status` tinyint(1) NULL DEFAULT NULL COMMENT '同步状态（1：成功，0：失败）',
  `create_time` int(10) UNSIGNED NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '添加日志表' ROW_FORMAT = Dynamic;

-- ----------------------------
-- Table structure for products
-- ----------------------------
DROP TABLE IF EXISTS `products`;
CREATE TABLE `products`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '受影响的产品名',
  `create_time` int(10) UNSIGNED NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 593 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '受影响的产品表' ROW_FORMAT = Dynamic;

-- ----------------------------
-- Table structure for vul_bid_relationship
-- ----------------------------
DROP TABLE IF EXISTS `vul_bid_relationship`;
CREATE TABLE `vul_bid_relationship`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `v_id` int(11) UNSIGNED NULL DEFAULT NULL,
  `b_id` int(11) UNSIGNED NULL DEFAULT NULL,
  `create_time` int(11) UNSIGNED NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `vid_in_vb`(`v_id`) USING BTREE,
  INDEX `bid_in_vb`(`b_id`) USING BTREE,
  CONSTRAINT `bid_in_vb` FOREIGN KEY (`b_id`) REFERENCES `bugtraq` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `vid_in_vb` FOREIGN KEY (`v_id`) REFERENCES `vulnerabilitys` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE = InnoDB AUTO_INCREMENT = 1713 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Table structure for vul_cve_relationship
-- ----------------------------
DROP TABLE IF EXISTS `vul_cve_relationship`;
CREATE TABLE `vul_cve_relationship`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `v_id` int(10) UNSIGNED NULL DEFAULT NULL COMMENT '漏洞表外键',
  `cve_id` int(10) UNSIGNED NULL DEFAULT NULL COMMENT 'cve表外键',
  `create_time` int(11) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `v_id`(`v_id`) USING BTREE,
  INDEX `cve_id`(`cve_id`) USING BTREE,
  CONSTRAINT `cve_id` FOREIGN KEY (`cve_id`) REFERENCES `cves` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `v_id` FOREIGN KEY (`v_id`) REFERENCES `vulnerabilitys` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE = InnoDB AUTO_INCREMENT = 1809 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '漏洞-cve关系表' ROW_FORMAT = Dynamic;

-- ----------------------------
-- Table structure for vul_pro_relationship
-- ----------------------------
DROP TABLE IF EXISTS `vul_pro_relationship`;
CREATE TABLE `vul_pro_relationship`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `v_id` int(10) UNSIGNED NULL DEFAULT NULL,
  `pro_id` int(10) UNSIGNED NULL DEFAULT NULL,
  `create_time` int(10) UNSIGNED NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `vid`(`v_id`) USING BTREE,
  INDEX `proid`(`pro_id`) USING BTREE,
  CONSTRAINT `proid` FOREIGN KEY (`pro_id`) REFERENCES `products` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `vid` FOREIGN KEY (`v_id`) REFERENCES `vulnerabilitys` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE = InnoDB AUTO_INCREMENT = 1791 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Table structure for vulnerabilitys
-- ----------------------------
DROP TABLE IF EXISTS `vulnerabilitys`;
CREATE TABLE `vulnerabilitys`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `cnvd_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'cnvd编号',
  `title` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '漏洞名称',
  `serverity` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '漏洞危害等级',
  `is_event` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '漏洞类型（是否为事件型漏洞）',
  `submit_time` int(11) NULL DEFAULT NULL COMMENT '漏洞报送时间',
  `open_time` int(11) NULL DEFAULT NULL COMMENT '漏洞公开时间',
  `discoverer_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '漏洞发现者',
  `formal_way` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '解决办法',
  `description` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '漏洞描述',
  `patch_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '补丁名称',
  `patch_description` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '补丁描述',
  `files_id` int(11) UNSIGNED NULL DEFAULT NULL COMMENT 'files表外键',
  `create_time` int(11) NULL DEFAULT NULL COMMENT '同步时间',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `files_id`(`files_id`) USING BTREE,
  CONSTRAINT `files_id` FOREIGN KEY (`files_id`) REFERENCES `files` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE = InnoDB AUTO_INCREMENT = 1807 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci ROW_FORMAT = Dynamic;

SET FOREIGN_KEY_CHECKS = 1;
